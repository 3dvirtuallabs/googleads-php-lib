<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dfp API Documentation</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../css/template.css" type="text/css"></link></head><body><div id="content"><h1 class="file">Dfp/Util/v201505/ReportDownloader.php</h1><div id="file-nav-box"><div id="file-nav-container"><ul id="file-nav"><li><a href="#classes"><img src="../images/icons/class.png" alt="Class" height="14"></img>
                          Classes
                      </a><ul><li><a href="#\ReportDownloader">\ReportDownloader</a></li></ul></li></ul><div style="clear: left;"></div></div><div id="file-nav-tab">
              Table of Contents
          </div></div><a name="top" class="anchor"></a><div id="file-description"><div class="short-description">Retrieves reports using a {@link ReportService}.</div><div class="long-description"><p>PHP version 5</p>

<p>Copyright 2014, Google Inc. All Rights Reserved.</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div></div><dl class="file-info"><dt>Category</dt><dd>WebServices
         
    </dd><dt>Copyright</dt><dd>2014, Google Inc. All Rights Reserved.
         
    </dd><dt>License</dt><dd>http://www.apache.org/licenses/LICENSE-2.0 Apache License,
            Version 2.0
         
    </dd><dt>Package</dt><dd>GoogleApiAdsDfp
         
    </dd><dt>Subpackage</dt><dd>Util
         
    </dd></dl><a name="classes" class="anchor"></a><a id="\ReportDownloader" class="anchor"></a><h2 class="class">\ReportDownloader<div class="to-top"><a href="#top">jump to top</a></div></h2><div class="class"><small class="package"><b>Package: </b>GoogleApiAdsDfp\Util</small><div class="short-description">Retrieves reports using a {@link ReportService}.</div><div class="long-description"></div><dl class="class-info"></dl><h3>Constants</h3><div><a id="\ReportDownloader::SLEEP_DURATION" class="anchor"></a><div class="constant publicC"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/constant.png" alt="Constant"></img> 
                <span class="highlight">SLEEP_DURATION</span>
                = 30</code><div class="description"><div class="short-description">The time to sleep in seconds before each request to the service.</div></div><div class="code-tabs"><div class="long-description"></div></div><div class="clear"></div></div></div><h3>Properties</h3><div><a id="\ReportDownloader::$reportJobId" class="anchor"></a><div class="property private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">$reportJobId</span></code><div class="description"></div><div class="code-tabs"><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>n/a</dd></dl></div><div class="clear"></div></div><a id="\ReportDownloader::$reportService" class="anchor"></a><div class="property private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">$reportService</span></code><div class="description"></div><div class="code-tabs"><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>n/a</dd></dl></div><div class="clear"></div></div></div><h3>Methods</h3><div><a id="\ReportDownloader::__construct()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">__construct</span><span class="nb-faded-text">(\ReportService $reportService, float $reportJobId)</span> : void</code><div class="description"><p class="short_description">Constructs a {@code ReportDownloader} object for a {@link ReportService}
and a report job id that the the class works on.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$reportService</th><td>\ReportService</td><td><em><p>an instance of the report service</p></em></td></tr><tr><th>$reportJobId</th><td>float</td><td><em><p>the report job ID</p></em></td></tr></table></div><div class="clear"></div></div><a id="\ReportDownloader::downloadReport()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">downloadReport</span><span class="nb-faded-text">(string $exportFormat, string $filePath = null)</span> : mixed</code><div class="description"><p class="short_description">Downloads a Gzip report from an URL.</p></div><div class="code-tabs"><div class="long-description"><p>to file located at {@code fileName}.
If the {@code filePath} is specified the report will be downloaded to the
file at that path, otherwise it will be downloaded to memory and
returned as a string.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$exportFormat</th><td>string</td><td><em><p>the export format of the report</p></em></td></tr><tr><th>$filePath</th><td>string</td><td><em><p>an optional file path to download the report to</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>report contents as a string if {@code filePath} isn't
    specified, otherwise the size of the downloaded report in bytes</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/http://php.net/manual/en/class.invalidargumentexception.php">\InvalidArgumentException</a></td><td><em>if the report download URL is invalid</em></td></tr></table></div><div class="clear"></div></div><a id="\ReportDownloader::getDownloadUrl()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">getDownloadUrl</span><span class="nb-faded-text">(string $exportFormat)</span> : string</code><div class="description"><p class="short_description">Gets the download URL for a GZip or plain-text format report.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$exportFormat</th><td>string</td><td><em><p>the export format of the report</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>the URL for the report download</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Common.Lib.ValidationException.html#\ValidationException">\ValidationException</a></td><td><em>if the report is not completed</em></td></tr></table></div><div class="clear"></div></div><a id="\ReportDownloader::waitForReportReady()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">waitForReportReady</span><span class="nb-faded-text">()</span> : bool</code><div class="description"><p class="short_description">Blocks and waits for a report to be ready.</p></div><div class="code-tabs"><div class="long-description"><p>When a report's job status is
received that is not 'PENDING' or 'IN_PROGRESS', the report is considered
finished, and the method is returned with a {@code true} if the report was
successful, or an {@code false} otherwise.</p></div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>bool</td><td>{@code true} if the report was successful, {@code false}
    otherwise</td></tr></table></div><div class="clear"></div></div></div></div></div><small class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.0.0a12</a>.
        </small></body></html>
