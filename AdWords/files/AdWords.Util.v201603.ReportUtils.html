<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>AdWords API Documentation</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../css/template.css" type="text/css"></link></head><body><div id="content"><h1 class="file">AdWords/Util/v201603/ReportUtils.php</h1><div id="file-nav-box"><div id="file-nav-container"><ul id="file-nav"><li><a href="#classes"><img src="../images/icons/class.png" alt="Class" height="14"></img>
                          Classes
                      </a><ul><li><a href="#\ReportUtils">\ReportUtils</a></li></ul></li></ul><div style="clear: left;"></div></div><div id="file-nav-tab">
              Table of Contents
          </div></div><a name="top" class="anchor"></a><div id="file-description"><div class="short-description">A collection of utility methods for working with reports.</div><div class="long-description"><p>PHP version 5</p>

<p>Copyright 2015, Google Inc. All Rights Reserved.</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div></div><dl class="file-info"><dt>Category</dt><dd>WebServices
         
    </dd><dt>Copyright</dt><dd>2015, Google Inc. All Rights Reserved.
         
    </dd><dt>License</dt><dd>http://www.apache.org/licenses/LICENSE-2.0 Apache License,
            Version 2.0
         
    </dd><dt>Package</dt><dd>GoogleApiAdsAdWordsUtil
         
    </dd><dt>Subpackage</dt><dd>v201603
         
    </dd></dl><a name="classes" class="anchor"></a><a id="\ReportUtils" class="anchor"></a><h2 class="class">\ReportUtils<div class="to-top"><a href="#top">jump to top</a></div></h2><div class="class"><small class="package"><b>Package: </b>GoogleApiAdsAdWordsUtil\v201603</small><div class="short-description">A collection of utility methods for working with reports.</div><div class="long-description"></div><dl class="class-info"></dl><h3>Properties</h3><div><a id="\ReportUtils::$CLASS_MAP" class="anchor"></a><div class="property public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">$CLASS_MAP</span> = array('reportDownloadError' =&gt; 'ReportDownloadError')</code><div class="description"><span class="attribute">static</span><div class="short-description">The mapping of XML tag names in report download's XML error response to PHP
classes, which are needed in XML deserialization.</div></div><div class="code-tabs"><div class="long-description"></div><strong>Default value</strong><code>array('reportDownloadError' =&gt; 'ReportDownloadError')</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>n/a</dd></dl></div><div class="clear"></div></div><a id="\ReportUtils::$DOWNLOAD_URL_FORMAT" class="anchor"></a><div class="property private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">$DOWNLOAD_URL_FORMAT</span> = '%s/api/adwords/reportdownload/%s'</code><div class="description"><span class="attribute">static</span><div class="short-description">The format of the report download URL, for use with sprintf.</div></div><div class="code-tabs"><div class="long-description"></div><strong>Default value</strong><code>'%s/api/adwords/reportdownload/%s'</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>n/a</dd></dl></div><div class="clear"></div></div><a id="\ReportUtils::$ERROR_MESSAGE_REGEX" class="anchor"></a><div class="property private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">$ERROR_MESSAGE_REGEX</span> = '/^!!![^|]*\|\|\|([^|]*)\|\|\|([^?]*)\?\?\?/'</code><div class="description"><span class="attribute">static</span><div class="short-description">Regular expression used to detect errors messages in a response.</div></div><div class="code-tabs"><div class="long-description"></div><strong>Default value</strong><code>'/^!!![^|]*\|\|\|([^|]*)\|\|\|([^?]*)\?\?\?/'</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>n/a</dd></dl></div><div class="clear"></div></div><a id="\ReportUtils::$SNIPPET_LENGTH" class="anchor"></a><div class="property private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">$SNIPPET_LENGTH</span> = 1024</code><div class="description"><span class="attribute">static</span><div class="short-description">The length of the snippet to read from the request to determine if there
was an error.</div></div><div class="code-tabs"><div class="long-description"></div><strong>Default value</strong><code>1024</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>n/a</dd></dl></div><div class="clear"></div></div></div><h3>Methods</h3><div><a id="\ReportUtils::DownloadReport()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">DownloadReport</span><span class="nb-faded-text">(mixed $reportDefinition, string $path = null, <a href="../files/AdWords.Lib.AdWordsUser.html#\AdWordsUser">\AdWordsUser</a> $user, array $options = null)</span> : mixed</code><div class="description"><span class="attribute">static</span><p class="short_description">Downloads a new instance of an existing report definition.</p></div><div class="code-tabs"><div class="long-description"><p>If the path
parameter is specified it will be downloaded to the file at that path,
otherwise it will be downloaded to memory and be returned as a string.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$reportDefinition</th><td>mixed</td><td><em><p>the ReportDefinition to download or the id
    of a stored report definition</p></em></td></tr><tr><th>$path</th><td>string</td><td><em><p>an optional path of the file to download the report to</p></em></td></tr><tr><th>$user</th><td><a href="../files/AdWords.Lib.AdWordsUser.html#\AdWordsUser">\AdWordsUser</a></td><td><em><p>the user that created the ReportDefinition</p></em></td></tr><tr><th>$options</th><td>array</td><td><em><p>the option to use when downloading the report:
    {boolean} skipReportHeader: if report responses should skip the header
        row containing the report name and date range
    {boolean} skipColumnHeader: if report responses should skip the header
        row containing column names
    {boolean} skipReportSummary: if report responses should skip the
        summary row containing totals
    {boolean} includeZeroImpressions: if report responses should include
        zero impression rows
    {string} server: the server to make the request to. If <var>null</var>,
        then the default server will be used
    {string} version: the version to make the request against. If
        <var>null</var>, then the default version will be used</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>if path isn't specified the contents of the report,
    otherwise the size in bytes of the downloaded report</td></tr></table></div><div class="clear"></div></div><a id="\ReportUtils::DownloadReportFromUrl()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">DownloadReportFromUrl</span><span class="nb-faded-text">(string $url, array $headers, array $params, string $path = null)</span> : mixed</code><div class="description"><span class="attribute">static</span><p class="short_description">Downloads a report using the URL provided.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$url</th><td>string</td><td><em><p>the URL to make the request to</p></em></td></tr><tr><th>$headers</th><td>array</td><td><em><p>the headers to use in the request</p></em></td></tr><tr><th>$params</th><td>array</td><td><em><p>the parameters to pass in the request</p></em></td></tr><tr><th>$path</th><td>string</td><td><em><p>the optional path to download the report to</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>if path isn't specified the contents of the report,
    otherwise the size in bytes of the downloaded report</td></tr></table></div><div class="clear"></div></div><a id="\ReportUtils::DownloadReportWithAwql()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">DownloadReportWithAwql</span><span class="nb-faded-text">(string $reportQuery, string $path = null, <a href="../files/AdWords.Lib.AdWordsUser.html#\AdWordsUser">\AdWordsUser</a> $user,  $reportFormat, array $options = null)</span> : mixed</code><div class="description"><span class="attribute">static</span><p class="short_description">Downloads a report with AWQL.</p></div><div class="code-tabs"><div class="long-description"><p>If the path parameter is specified it will be
downloaded to the file at that path, otherwise it will be downloaded to
memory and be returned as a string.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$reportQuery</th><td>string</td><td><em><p>the query to use for the report</p></em></td></tr><tr><th>$path</th><td>string</td><td><em><p>an optional path of the file to download the report to</p></em></td></tr><tr><th>$user</th><td><a href="../files/AdWords.Lib.AdWordsUser.html#\AdWordsUser">\AdWordsUser</a></td><td><em><p>the user to retrieve report with</p></em></td></tr><tr><th>$reportFormat</th><td></td><td><em></em></td></tr><tr><th>$options</th><td>array</td><td><em><p>the option to use when downloading the report:
    {string} server: the server to make the request to. If <var>null</var>,
        then the default server will be used
    {string} version: the version to make the request against. If
        <var>null</var>, then the default version will be used</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>if path isn't specified the contents of the report,
    otherwise the size in bytes of the downloaded report</td></tr></table></div><div class="clear"></div></div><a id="\ReportUtils::GetHeaders()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">GetHeaders</span><span class="nb-faded-text">(<a href="../files/AdWords.Lib.AdWordsUser.html#\AdWordsUser">\AdWordsUser</a> $user, string $url, array $options = null)</span> : array</code><div class="description"><span class="attribute">static</span><p class="short_description">Gets the HTTP headers for the report download request.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$user</th><td><a href="../files/AdWords.Lib.AdWordsUser.html#\AdWordsUser">\AdWordsUser</a></td><td><em><p>the AdWordsUser to get credentials from</p></em></td></tr><tr><th>$url</th><td>string</td><td><em><p>the URL the request will be made to</p></em></td></tr><tr><th>$options</th><td>array</td><td><em><p>the options for the download</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>and array of strings, which are header names and values</td></tr></table></div><div class="clear"></div></div><a id="\ReportUtils::GetParams()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">GetParams</span><span class="nb-faded-text">(mixed $reportDefinition)</span> : array</code><div class="description"><span class="attribute">static</span><p class="short_description">Generates the parameters to use for the download request.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$reportDefinition</th><td>mixed</td><td><em><p>the report definition, as an ID or object</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>the parameters</td></tr></table></div><div class="clear"></div></div><a id="\ReportUtils::GetQueryParams()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">GetQueryParams</span><span class="nb-faded-text">(string $reportQuery, string $reportFormat)</span> : array</code><div class="description"><span class="attribute">static</span><p class="short_description">Generates the parameters to use for the download request with AWQL.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$reportQuery</th><td>string</td><td><em><p>the report query, as string</p></em></td></tr><tr><th>$reportFormat</th><td>string</td><td><em><p>the format to request report in, as string</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>the parameters</td></tr></table></div><div class="clear"></div></div><a id="\ReportUtils::GetUrl()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">GetUrl</span><span class="nb-faded-text">(<a href="../files/AdWords.Lib.AdWordsUser.html#\AdWordsUser">\AdWordsUser</a> $user, array $options = null)</span> : string</code><div class="description"><span class="attribute">static</span><p class="short_description">Generates the URL to use for the download request.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$user</th><td><a href="../files/AdWords.Lib.AdWordsUser.html#\AdWordsUser">\AdWordsUser</a></td><td><em><p>the AdWordsUser to make the request for</p></em></td></tr><tr><th>$options</th><td>array</td><td><em><p>the options configured for the download</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>the download URL</td></tr></table></div><div class="clear"></div></div><a id="\ReportUtils::LogRequest()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">LogRequest</span><span class="nb-faded-text">(string $requestHeaders, integer $responseCode, array $params = null, <a href="../files/http://php.net/manual/en/class.exception.php">\Exception</a> $exception = null)</span> : void</code><div class="description"><span class="attribute">static</span><p class="short_description">Logs the report download request.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$requestHeaders</th><td>string</td><td><em><p>the HTTP request headers</p></em></td></tr><tr><th>$responseCode</th><td>integer</td><td><em><p>the HTTP response code</p></em></td></tr><tr><th>$params</th><td>array</td><td><em><p>the parameters that were sent, if any</p></em></td></tr><tr><th>$exception</th><td><a href="../files/http://php.net/manual/en/class.exception.php">\Exception</a></td><td><em><p>the exception that will be thrown, if any</p></em></td></tr></table></div><div class="clear"></div></div><a id="\ReportUtils::ParseApiErrorXml()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">ParseApiErrorXml</span><span class="nb-faded-text">(string $responseXml)</span> : object | null</code><div class="description"><span class="attribute">static</span><p class="short_description">Tries to parse the error response xml from the AdWords API server as an
object.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$responseXml</th><td>string</td><td><em><p>the error response xml</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object | null</td><td>the parsed error object, or null if the response cannot
    be parsed.</td></tr></table></div><div class="clear"></div></div><a id="\ReportUtils::__construct()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">__construct</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">The ReportUtils class is not meant to have any instances.</p></div><div class="code-tabs"><div class="long-description"></div></div><div class="clear"></div></div></div></div></div><small class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.0.0a12</a>.
        </small></body></html>
